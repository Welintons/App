<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WS Gest√£o - Pro</title>

<!-- Manifest e tema -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff6600">

<style>
:root {
    --primary: #ff6600;
    --primary-light: #ff8533;
    --bg-dark: #121212;
    --glass: rgba(20, 20, 20, 0.85);
    --card: rgba(255, 255, 255, 0.05);
    --text: #ffffff;
    --success: #2ecc71;
    --danger: #e74c3c;
}

body {
    font-family: 'Inter', 'Segoe UI', sans-serif;
    margin: 0;
    min-height: 100vh;
    background: var(--bg-dark) url('https://raw.githubusercontent.com/Welintons/Wsinfor/main/Gemini_Generated_Image_bqf58fbqf58fbqf5.png') no-repeat center center fixed;
    background-size: cover;
    color: var(--text);
}

header {
    background: var(--glass);
    backdrop-filter: blur(15px);
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding: 0 20px;
    height: 70px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky; top: 0; z-index: 1000;
}

.logo { font-weight: 800; font-size: 1.4rem; letter-spacing: -1px; }
.logo span { color: var(--primary); }

nav { display: flex; gap: 5px; height: 100%; }
.nav-btn {
    background: transparent; color: rgba(255,255,255,0.6); border: none;
    padding: 0 20px; font-weight: 600; cursor: pointer; transition: 0.3s;
    position: relative; height: 100%; display: flex; align-items: center;
}
.nav-btn.active { color: var(--primary); }
.nav-btn.active::after {
    content: ''; position: absolute; bottom: 0; left: 0; width: 100%;
    height: 3px; background: var(--primary); box-shadow: 0 -2px 10px var(--primary);
}

main { width: 90%; max-width: 700px; margin: 30px auto; }

section {
    display: none; background: var(--glass); backdrop-filter: blur(10px);
    padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05);
    animation: slideUp 0.4s ease-out;
}
section.active { display: block; }

.submenu { display: flex; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 12px; margin-bottom: 25px; }
.sub-btn { flex: 1; background: transparent; color: #aaa; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: 600; }
.sub-btn.active-sub { background: var(--primary); color: white; }

ul { list-style: none; padding: 0; }
li { background: var(--card); margin-bottom: 12px; padding: 18px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
.item-row { display: flex; justify-content: space-between; align-items: center; }

.concluido { border-left: 4px solid var(--success); opacity: 0.5; }

input, textarea {
    width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
    padding: 15px; margin: 10px 0; border-radius: 12px; color: white; font-size: 1rem; box-sizing: border-box;
}
.btn-acao {
    width: 100%; background: linear-gradient(135deg, var(--primary), var(--primary-light));
    color: white; padding: 16px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer;
}

.endereco-link { color: #3498db; font-size: 0.85rem; text-decoration: none; display: block; margin-top: 5px; }

#modal-backdrop {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center;
}
.modal-content { background: #1e1e1e; padding: 30px; border-radius: 24px; width: 90%; max-width: 400px; border: 1px solid var(--primary); }

@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>

<header>
    <div class="logo">WS<span> GEST√ÉO</span></div>
    <nav>
        <button class="nav-btn active" onclick="abrirSecao(event,'clientes')">Clientes</button>
        <button class="nav-btn" onclick="abrirSecao(event,'agenda')">Agenda</button>
    </nav>
</header>

<main>
    <section id="clientes" class="active">
        <div class="submenu">
            <button class="sub-btn active-sub" onclick="mostrarPainel(event,'add-cli')">Novo Cliente</button>
            <button class="sub-btn" onclick="mostrarPainel(event,'list-cli')">Lista</button>
        </div>
        <div id="add-cli" class="painel">
            <input type="text" id="nome" placeholder="Nome Completo">
            <input type="tel" id="tel" placeholder="Telefone">
            <textarea id="obs" placeholder="Observa√ß√µes..."></textarea>
            <button class="btn-acao" onclick="salvarCliente()">CADASTRAR</button>
        </div>
        <div id="list-cli" class="painel" style="display:none">
            <input type="text" placeholder="üîç Buscar..." oninput="renderizarClientes(this.value)">
            <ul id="lista-clientes"></ul>
        </div>
    </section>

    <section id="agenda">
        <div class="submenu">
            <button class="sub-btn active-sub" onclick="mostrarPainel(event,'add-age')">Novo Agendamento</button>
            <button class="sub-btn" onclick="mostrarPainel(event,'list-age')">Ver Agenda</button>
        </div>
        <div id="add-age" class="painel">
            <input type="text" id="age-cli" placeholder="Nome do Cliente">
            <div style="display:flex; gap:10px">
                <input type="date" id="age-data">
                <input type="time" id="age-hora">
            </div>
            <input type="text" id="age-end" placeholder="Endere√ßo (Rua, N√∫mero, Bairro)">
            <textarea id="age-obs" placeholder="Observa√ß√µes do servi√ßo..."></textarea>
            <button class="btn-acao" onclick="salvarAgenda()">AGENDAR AGORA</button>
        </div>
        <div id="list-age" class="painel" style="display:none">
            <ul id="lista-agenda"></ul>
        </div>
    </section>
</main>

<div id="modal-backdrop" onclick="fecharModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div id="detalhes-corpo"></div>
        <button class="btn-acao" style="background: #333; margin-top: 20px;" onclick="fecharModal()">FECHAR</button>
    </div>
</div>

<script>
const DB = {
    ler: (c) => JSON.parse(localStorage.getItem(c) || '[]'),
    salvar: (c,d) => localStorage.setItem(c,JSON.stringify(d))
};

function abrirSecao(e,id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    e.currentTarget.classList.add('active');
}

function mostrarPainel(e,id){
    const sec = e.target.closest('section');
    sec.querySelectorAll('.painel').forEach(p=>p.style.display='none');
    document.getElementById(id).style.display='block';
    sec.querySelectorAll('.sub-btn').forEach(b=>b.classList.remove('active-sub'));
    e.target.classList.add('active-sub');
    if(id==='list-cli') renderizarClientes();
    if(id==='list-age') renderizarAgenda();
}

// CLIENTES
function salvarCliente(){
    const nome=document.getElementById('nome').value;
    const tel=document.getElementById('tel').value;
    const obs=document.getElementById('obs').value;
    if(!nome) return alert("Nome obrigat√≥rio");
    const lista=DB.ler('clientes');
    lista.push({id:Date.now(),nome,tel,obs});
    DB.salvar('clientes',lista);
    alert("Cliente salvo!");
    document.querySelectorAll('#add-cli input,#add-cli textarea').forEach(i=>i.value='');
}

function renderizarClientes(b=''){
    const l=document.getElementById('lista-clientes');
    l.innerHTML=DB.ler('clientes').filter(c=>c.nome.toLowerCase().includes(b.toLowerCase())).map(c=>`
        <li onclick="verCli(${c.id})">
            <div class="item-row">
                <strong>${c.nome}</strong>
                <button style="color:var(--danger); background:none; border:none; cursor:pointer" onclick="del('clientes',${c.id},renderizarClientes,event)">Excluir</button>
            </div>
        </li>
    `).join('')||'<li>Vazio</li>';
}

function verCli(id){
    const c=DB.ler('clientes').find(x=>x.id===id);
    document.getElementById('detalhes-corpo').innerHTML=`<h2>${c.nome}</h2><p>üìû ${c.tel}</p><p>üìù ${c.obs}</p>`;
    document.getElementById('modal-backdrop').style.display='flex';
}

// AGENDA
function salvarAgenda(){
    const cli=document.getElementById('age-cli').value;
    const dat=document.getElementById('age-data').value;
    const hor=document.getElementById('age-hora').value;
    const end=document.getElementById('age-end').value;
    const obs=document.getElementById('age-obs').value;
    if(!cli||!dat) return alert("Preencha os dados");
    const a=DB.ler('agenda');
    a.push({id:Date.now(),cli,dat,hor,end,obs,ok:false});
    DB.salvar('agenda',a);
    alert("Agendado!");
    document.querySelectorAll('#add-age input,#add-age textarea').forEach(i=>i.value='');
}

function renderizarAgenda(){
    const l=document.getElementById('lista-agenda');
    const d=DB.ler('agenda').sort((a,b)=>a.dat.localeCompare(b.dat));
    l.innerHTML=d.map(a=>`
        <li class="${a.ok?'concluido':''}">
            <div class="item-row">
                <div>
                    <span style="color:var(--primary); font-size:0.8rem">${a.dat.split('-').reverse().join('/')} - ${a.hor}</span><br>
                    <strong>${a.cli}</strong>
                    ${a.end?`<a href="https://www.google.com/maps/search/${encodeURIComponent(a.end)}" target="_blank" class="endereco-link">üìç ${a.end}</a>`:''}
                </div>
                <div style="display:flex; gap:10px">
                    <button style="background:var(--success); color:white; border:none; padding:8px; border-radius:5px" onclick="status(${a.id})">‚úì</button>
                    <button style="color:var(--danger); background:none; border:none" onclick="del('agenda',${a.id},renderizarAgenda,event)">‚úï</button>
                </div>
            </div>
        </li>
    `).join('')||'<li>Vazio</li>';
}

function status(id){
    const a=DB.ler('agenda');
    const i=a.findIndex(x=>x.id===id);
    a[i].ok=!a[i].ok;
    DB.salvar('agenda',a);
    renderizarAgenda();
}

function del(k,id,cb,e){
    e.stopPropagation();
    if(confirm("Excluir?")){
        DB.salvar(k,DB.ler(k).filter(x=>x.id!==id));
        cb();
    }
}

function fecharModal(){ document.getElementById('modal-backdrop').style.display='none'; }

// CARREGA DADOS AO ABRIR
window.onload = ()=>{
    renderizarClientes();
    renderizarAgenda();
};

// REGISTRO DO SERVICE WORKER
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
    .then(()=>console.log('Service Worker registrado!'))
    .catch(err=>console.log('Erro ao registrar SW:', err));
}
</script>

</body>
</html>